# Getting Started with AI Agent Workflow

This guide provides step-by-step instructions for setting up and using the AI Agent Workflow for Document Question Answering.

## Prerequisites

- Python 3.10 or higher
- OpenAI API key
- Sufficient disk space for vector store and document storage

## Installation

### Step 1: Clone or download the repository

If you downloaded a ZIP file, extract it to a directory of your choice.

### Step 2: Run the installation script

```bash
python install.py
```

To also install packages for sample document generation:

```bash
python install.py --with-samples
```

### Step 3: Configure environment variables

Edit the `.env` file (created during installation) and add your OpenAI API key:

```
OPENAI_API_KEY=your_openai_api_key_here
```

## Using the System

### Preparing a Document

You have several options for test documents:

1. **Use your own PDF document** (20-25 pages recommended)
2. **Create a sample document** using the included generator:

```bash
python utils/sample_doc_generator.py
```

This will create a sample business document in the `samples/` directory.

### Running the System

#### Interactive Mode

To run the system in interactive mode, where you can ask questions directly:

```bash
python main.py --document path/to/your/document.pdf --interactive
```

#### Processing a List of Questions

To process a list of questions from a file:

```bash
python main.py --document path/to/your/document.pdf --questions path/to/questions.txt
```

The questions file should contain one question per line.

#### Using Default Sample Questions

To run with the default sample questions:

```bash
python main.py --document path/to/your/document.pdf
```

### Additional Options

- `--output` - Specify a custom output file (default: answers.txt)
- `--persist-dir` - Directory to persist embeddings and graph data
- `--no-kg` - Disable knowledge graph functionality

Example with all options:

```bash
python main.py --document samples/document.pdf --persist-dir ./persisted_data --output custom_answers.txt
```

## System Components

The AI Agent Workflow consists of several components:

1. **PDF Processor** - Extracts text, tables, and structure from PDFs
2. **Planner Agent** - Analyzes queries and determines retrieval strategy
3. **Retriever Agent** - Fetches relevant context based on the plan
4. **Answer Generator** - Produces coherent responses from retrieved context
5. **Conversation Memory** - Maintains context for follow-up questions

## Advanced Features

### Knowledge Graph

The system includes knowledge graph functionality that enhances understanding of document relationships. This feature is optional and requires additional packages.

#### Installing Knowledge Graph Support

To enable full knowledge graph support, uncomment these lines in requirements.txt and reinstall:

```
# llama-index-graph-stores-nebula>=0.1.0
# llama-index-indices-kg>=0.1.0
```

Then run:
```bash
pip install -r requirements.txt
```

The system will automatically detect whether knowledge graph packages are available and adjust functionality accordingly. If the packages are not available, the system will still function with a simplified implementation.

#### Disabling Knowledge Graph

Even if the packages are installed, you can disable knowledge graph functionality with:

```bash
python main.py --document path/to/your/document.pdf --no-kg
```

This can be useful for faster processing or troubleshooting.

## Troubleshooting

### Common Issues

1. **ImportError**: Make sure all dependencies are installed correctly
   ```bash
   pip install -r requirements.txt
   ```

2. **API Key Errors**: Ensure your OpenAI API key is valid and has sufficient credits

3. **Memory Issues**: For large documents, try using a machine with more RAM or reduce the chunk size in `pdf_loader.py`

### Getting Help

If you encounter issues not covered here, please check:
- The explanation.txt file for implementation details
- Comments in the source code
- The original documentation for LlamaIndex

## Extending the System

The modular design makes it easy to extend the system:

- Add new document types by extending the document loading modules
- Implement custom retrieval strategies in the retriever agent
- Create specialized answer templates for different question types

## Examples

### Sample Question-Answer Pairs

See `answers.txt` for examples of questions and answers generated by the system.
